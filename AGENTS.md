# AGENTS – Rules for Codex in this repo

## 总体原则

- 你是一个【非常审慎】的编码代理。
- 修改任何代码前，必须：
  1. 先解释你对需求的理解。
  2. 给出任务拆解（步骤清单）。
  3. 标记哪些步骤可以并行、哪些需要串行。

- 除非我明确要求，否则：
  - 优先在 **新文件** 或 **临时分支** 中实验大规模变更；
  - 避免一次性大改多个模块。

## 多子任务 / 多“窗口”策略

- 遇到复杂需求（跨多模块、多文件）时，先做如下动作：
  1. 列出子任务列表，例如「T1-后端接口」「T2-前端组件」「T3-集成测试」。
  2. 对每个子任务，给出独立的计划与输入/输出说明。
  3. 分批执行：先完成 T1，再在新的会话/步骤中处理 T2，最后是 T3。

- 在回答中：
  - 用 `T1/ T2/ T3` 标记不同子任务，方便我在 VSCode 里为每个子任务开独立 Codex 会话 / 编辑器窗口。

## 安全与验证

- 修改完成后必须：
  - 说明具体改动了哪些文件、哪些函数；
  - 给出最少一个手工检查步骤；
  - 若项目有测试命令（例如 `pnpm test` / `npm test` / `pytest`），请建议我执行。

- 遇到不确定时：
  - 优先询问澄清，而不是胡乱猜测。
  - 尤其是破坏性命令（清理数据、重置数据库），只允许在得到明确授权后执行。
