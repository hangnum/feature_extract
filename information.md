
# 详细信息补充

## 一、数据格式本身

1. patient_id：是为唯一
2. 忽略fold，不做交叉验证，制作7:3
3. 224×224×1的输入，图片本身就是灰度图。需要修改第一层的conv
4. 存在病人只有A或者只有P，这类病人要剔除，不参加训练和提取

## 二、数据划分策略

1. JM按照7:3划分训练集和内验集（忽略原始 fold，只用 JM 全量病人做一次性 7:3 划分，做分层抽样）
2. 其他医院全部为外验集
3. 划分基于病人 ID，确保同一病人的所有 slice 不会同时出现在训练集与验证/测试集中，避免数据泄漏。

## 三、多模态对齐与特征粒度

1. 特征是“病人级”，会将每张图片生成一个（1，m）的特征，m为特征维度
    每个病人的特征是多个图片拼接成的(n, m)的，n为图片数量
2. 当某个病人缺少某个模态时，丢掉这个病人
3. 最终融合模型：（这里暂时用一个推荐的进行测试）（你可以在计划中自行补充）

## 四、训练配置与可复现性

1. 随机种子与可复现：随机种子用42，在日志中记录 git commit / config 文件快照
2. config包括：
    模型 backbone（例如 ResNet18 / ViT 等）
    输入尺寸、是否使用预训练权重
    优化器、学习率、batch size、epoch 数
    数据增强方案（翻转、旋转、归一化参数等）
    损失函数与类权重（处理类别不平衡）
    ... # 未写完，需要继续补充
3. 日志与模型保存策略：
    根据val AUC保存最佳模型。在训练完成后保留训练历史的auc和loss（折线图和表格）
    使用早停
    日志保存目录结构：按照你的工程规范推荐自己决定
